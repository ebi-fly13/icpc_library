---
data:
  _extendedDependsOn:
  - icon: ':question:'
    path: geometry/base_ld.hpp
    title: base_ld
  - icon: ':question:'
    path: template/template.hpp
    title: "\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8"
  _extendedRequiredBy: []
  _extendedVerifiedWith: []
  _isVerificationFailed: true
  _pathExtension: cpp
  _verificationStatusIcon: ':x:'
  attributes:
    '*NOT_SPECIAL_COMMENTS*': ''
    PROBLEM: https://onlinejudge.u-aizu.ac.jp/problems/1662
    links:
    - https://onlinejudge.u-aizu.ac.jp/problems/1662
  bundledCode: "#line 1 \"test/geometry/aoj_1662.test.cpp\"\n#define PROBLEM \"https://onlinejudge.u-aizu.ac.jp/problems/1662\"\
    \n\n#line 2 \"template/template.hpp\"\n\n#include <bits/stdc++.h>\n\n#define rep(i,\
    \ s, n) for (int i = (int)(s); i < (int)(n); i++)\n#define rrep(i, s, n) for (int\
    \ i = (int)(n)-1; i >= (int)(s); i--)\n#define all(v) v.begin(), v.end()\n\nusing\
    \ ll = long long;\nusing ld = long double;\nusing ull = unsigned long long;\n\n\
    template <typename T> bool chmin(T &a, const T &b) {\n    if (a <= b) return false;\n\
    \    a = b;\n    return true;\n}\ntemplate <typename T> bool chmax(T &a, const\
    \ T &b) {\n    if (a >= b) return false;\n    a = b;\n    return true;\n}\n\n\
    namespace lib {\n\nusing namespace std;\n\n}  // namespace lib\n\n// using namespace\
    \ lib;\n#line 4 \"test/geometry/aoj_1662.test.cpp\"\n\n#line 2 \"geometry/base_ld.hpp\"\
    \n\n#line 4 \"geometry/base_ld.hpp\"\n\nnamespace lib {\n\nusing vec = complex<ld>;\n\
    \nconst ld PI = acos(-1);\n\nvoid ldout(int len = 20) {\n    cout << fixed <<\
    \ setprecision(len);\n}\n\nint sgn(ld a, const ld eps = 1e-7) {\n    return (a\
    \ < -eps) ? -1 : (a > eps) ? 1 : 0;\n}\n\nbool same_vec(vec a, vec b) {\n    a\
    \ -= b;\n    return sgn(a.real()) == 0 && sgn(a.imag()) == 0;\n}\n\nld dot(const\
    \ vec &a, const vec &b) {\n    return (conj(a) * b).real();\n}\n\nld cross(const\
    \ vec &a, const vec &b) {\n    return (conj(a) * b).imag();\n}\n\nint isp(const\
    \ vec &a, const vec &b, const vec &c) {\n    int cross_sgn = sgn(cross(b - a,\
    \ c - a));\n    if (cross_sgn == 0) {\n        if (sgn(dot(b - a, c - a)) < 0)\
    \ return -2;\n        if (sgn(dot(a - b, c - b)) < 0) return 2;\n    }\n    return\
    \ cross_sgn;\n}\n\nvec rot90(const vec &a) {\n    return {-a.imag(), a.real()};\n\
    }\n\nvec rot(const vec &a, ld rad) {\n    return a * vec(cosl(rad), sinl(rad));\n\
    }\n\nbool comp_for_argument_sort(const vec &lhs, const vec &rhs) {\n    // if\
    \ (abs(arg(lhs)-arg(rhs)) < eps) return false; // need ?\n    return arg(lhs)\
    \ < arg(rhs);\n}\n\n}  // namespace lib\n#line 6 \"test/geometry/aoj_1662.test.cpp\"\
    \n\nusing namespace lib;\n\nconst int iinf = 1e9;\n\nint n, m;\nvector<vec> a,\
    \ b;\n\nconst vector<int> dx = {-1,0,1,0}, dy = {0,-1,0,1};\n\n//ax^2 + bx + c\
    \ <= 0, a > 0\nbool has_interval(ld aa, ld bb, ld cc){\n    if(bb*bb - 4*aa*cc\
    \ < 0) return false;\n    if (cc < 0 || aa+bb+cc < 0) return true;\n    if (bb\
    \ < 0 && 2*aa+bb > 0) return true;\n    return false;\n}\n\nusing P = pair<int,int>;\n\
    \nbool check(ld d){\n    if (abs(a[0]-b[0]) > d) return false;\n    if (abs(a[n-1]-b[m-1])\
    \ > d) return false;\n    vector es(n-1,vector(m-1,vector<bool>(4,false)));\n\
    \    rep(i,0,n-1) rep(j,0,m-1){\n        vec la = a[i], ra = a[i+1];\n       \
    \ vec lb = b[j], rb = b[j+1];\n        vec va = ra - la;\n        vec vb = rb\
    \ - lb;\n        if (i > 0){\n            vec c = lb - la;\n            ld aa\
    \ = norm(vb), bb = 2*dot(vb,c), cc = norm(c) - d*d;\n            if (has_interval(aa,bb,cc))\
    \ es[i][j][0] = true;\n        }\n        if (j > 0){\n            vec c = la\
    \ - lb;\n            ld aa = norm(va), bb = 2*dot(va,c), cc = norm(c) - d*d;\n\
    \            if (has_interval(aa,bb,cc)) es[i][j][1] = true;\n        }\n    \
    \    if (i < n-2){\n            vec c = lb - la - va;\n            ld aa = norm(vb),\
    \ bb = 2*dot(vb,c), cc = norm(c) - d*d;\n            if (has_interval(aa,bb,cc))\
    \ es[i][j][2] = true;\n        }\n        if (j < m-2){\n            vec c = la\
    \ - lb - vb;\n            ld aa = norm(va), bb = 2*dot(va,c), cc = norm(c) - d*d;\n\
    \            if (has_interval(aa,bb,cc)) es[i][j][3] = true;\n        }\n    }\n\
    \    vector<vector<int>> dist(n-1,vector<int>(m-1,iinf));\n    dist[0][0] = 0;\n\
    \    queue<P> que;\n    que.push(P(0,0));\n    while (!que.empty()){\n       \
    \ auto [ix, iy] = que.front(); que.pop();\n        rep(k,0,4){\n            if\
    \ (es[ix][iy][k] == false) continue;\n            int nx = ix + dx[k];\n     \
    \       int ny = iy + dy[k];\n            if (chmin(dist[nx][ny],dist[ix][iy]+1)){\n\
    \                que.push(P(nx,ny));\n            }\n        }\n    }\n    return\
    \ dist[n-2][m-2] < iinf;\n}\n\nvoid solve(){\n    ld le = 0, ri = 4000;\n    int\
    \ test = 60;\n    while (test--){\n        ld md = (le + ri) / 2;\n        if\
    \ (check(md)) ri = md;\n        else le = md;\n    }\n    cout << ri << endl;\n\
    }\n\nint main() {\n    ldout();\n    while (true){\n        a.clear(), b.clear();\n\
    \        cin >> n;\n        if (n == 0) break;\n        a.resize(n);\n       \
    \ rep(i,0,n){\n            ld x, y; cin >> x >> y;\n            a[i] = vec(x,y);\n\
    \        }\n        cin >> m;\n        b.resize(m);\n        rep(i,0,m){\n   \
    \         ld x, y; cin >> x >> y;\n            b[i] = vec(x,y);\n        }\n \
    \       solve();\n    }\n}\n"
  code: "#define PROBLEM \"https://onlinejudge.u-aizu.ac.jp/problems/1662\"\n\n#include\"\
    ../../template/template.hpp\"\n\n#include\"../../geometry/base_ld.hpp\"\n\nusing\
    \ namespace lib;\n\nconst int iinf = 1e9;\n\nint n, m;\nvector<vec> a, b;\n\n\
    const vector<int> dx = {-1,0,1,0}, dy = {0,-1,0,1};\n\n//ax^2 + bx + c <= 0, a\
    \ > 0\nbool has_interval(ld aa, ld bb, ld cc){\n    if(bb*bb - 4*aa*cc < 0) return\
    \ false;\n    if (cc < 0 || aa+bb+cc < 0) return true;\n    if (bb < 0 && 2*aa+bb\
    \ > 0) return true;\n    return false;\n}\n\nusing P = pair<int,int>;\n\nbool\
    \ check(ld d){\n    if (abs(a[0]-b[0]) > d) return false;\n    if (abs(a[n-1]-b[m-1])\
    \ > d) return false;\n    vector es(n-1,vector(m-1,vector<bool>(4,false)));\n\
    \    rep(i,0,n-1) rep(j,0,m-1){\n        vec la = a[i], ra = a[i+1];\n       \
    \ vec lb = b[j], rb = b[j+1];\n        vec va = ra - la;\n        vec vb = rb\
    \ - lb;\n        if (i > 0){\n            vec c = lb - la;\n            ld aa\
    \ = norm(vb), bb = 2*dot(vb,c), cc = norm(c) - d*d;\n            if (has_interval(aa,bb,cc))\
    \ es[i][j][0] = true;\n        }\n        if (j > 0){\n            vec c = la\
    \ - lb;\n            ld aa = norm(va), bb = 2*dot(va,c), cc = norm(c) - d*d;\n\
    \            if (has_interval(aa,bb,cc)) es[i][j][1] = true;\n        }\n    \
    \    if (i < n-2){\n            vec c = lb - la - va;\n            ld aa = norm(vb),\
    \ bb = 2*dot(vb,c), cc = norm(c) - d*d;\n            if (has_interval(aa,bb,cc))\
    \ es[i][j][2] = true;\n        }\n        if (j < m-2){\n            vec c = la\
    \ - lb - vb;\n            ld aa = norm(va), bb = 2*dot(va,c), cc = norm(c) - d*d;\n\
    \            if (has_interval(aa,bb,cc)) es[i][j][3] = true;\n        }\n    }\n\
    \    vector<vector<int>> dist(n-1,vector<int>(m-1,iinf));\n    dist[0][0] = 0;\n\
    \    queue<P> que;\n    que.push(P(0,0));\n    while (!que.empty()){\n       \
    \ auto [ix, iy] = que.front(); que.pop();\n        rep(k,0,4){\n            if\
    \ (es[ix][iy][k] == false) continue;\n            int nx = ix + dx[k];\n     \
    \       int ny = iy + dy[k];\n            if (chmin(dist[nx][ny],dist[ix][iy]+1)){\n\
    \                que.push(P(nx,ny));\n            }\n        }\n    }\n    return\
    \ dist[n-2][m-2] < iinf;\n}\n\nvoid solve(){\n    ld le = 0, ri = 4000;\n    int\
    \ test = 60;\n    while (test--){\n        ld md = (le + ri) / 2;\n        if\
    \ (check(md)) ri = md;\n        else le = md;\n    }\n    cout << ri << endl;\n\
    }\n\nint main() {\n    ldout();\n    while (true){\n        a.clear(), b.clear();\n\
    \        cin >> n;\n        if (n == 0) break;\n        a.resize(n);\n       \
    \ rep(i,0,n){\n            ld x, y; cin >> x >> y;\n            a[i] = vec(x,y);\n\
    \        }\n        cin >> m;\n        b.resize(m);\n        rep(i,0,m){\n   \
    \         ld x, y; cin >> x >> y;\n            b[i] = vec(x,y);\n        }\n \
    \       solve();\n    }\n}\n"
  dependsOn:
  - template/template.hpp
  - geometry/base_ld.hpp
  isVerificationFile: true
  path: test/geometry/aoj_1662.test.cpp
  requiredBy: []
  timestamp: '2023-11-03 23:06:59+09:00'
  verificationStatus: TEST_WRONG_ANSWER
  verifiedWith: []
documentation_of: test/geometry/aoj_1662.test.cpp
layout: document
redirect_from:
- /verify/test/geometry/aoj_1662.test.cpp
- /verify/test/geometry/aoj_1662.test.cpp.html
title: test/geometry/aoj_1662.test.cpp
---
